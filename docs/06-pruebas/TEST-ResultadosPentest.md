# RESULTADOS DE PRUEBAS DE PENETRACIÓN
**Proyecto:** Sistema de Autenticación Segura  
**Equipo:** Carlos Campoverde, Juan Pasquel, Anthony Villarreal  
**Fecha prueba:** 20/01/2026  
**Ejecutado por:** Anthony Villarreal

## 1. RESUMEN EJECUTIVO

### Métricas principales:
- **Severidad crítica:** 0 vulnerabilidades
- **Severidad alta:** 1 vulnerabilidad
- **Severidad media:** 2 vulnerabilidades
- **Severidad baja:** 3 hallazgos

### Estado general: ✅ ACEPTABLE
El sistema resistió ataques básicos, necesita mejoras en configuración.

## 2. VULNERABILIDADES ENCONTRADAS

### 2.1 ALTA: Clave de encriptación hardcodeada
**Ubicación:** `backend/utils/encryption.js`  
**Impacto:** Exposición de embeddings faciales si código es accedido.

**Código vulnerable:**
```javascript
const ENCRYPTION_KEY = 'supersecretkey32bytessupersecretkey';
```

**Recomendación:**
```javascript
const ENCRYPTION_KEY = process.env.ENCRYPTION_KEY;
```

**Responsable:** Carlos Campoverde  
**Fecha estimada fix:** 23/01/2026

2.2 MEDIA: JWT secret débil
**Ubicación:** `controllers/userController.js`

**Código vulnerable:**
```javascript
jwt.sign({...}, 'secret_key', { expiresIn: '5m' });
```

**Impacto:** Posible falsificación de tokens.

**Recomendación:** Usar variable de entorno con mínimo 32 caracteres.

**Responsable:** Carlos Campoverde  
**Fecha estimada fix:** 25/01/2026

2.3 MEDIA: No liveness detection en biometría
**Componente:** `components/Login.js`

**Impacto:** Posible spoofing con foto/video.

**Recomendación:** Implementar detección de parpadeo/movimiento.

**Responsable:** Juan Pasquel  
**Fecha estimada fix:** 03/02/2026

3. PRUEBAS EXITOSAS

### 3.1 SQL Injection - ✅ RESISTE
- **Prueba:** `' OR '1'='1' --` en campo email
- **Resultado:** Rechazado por validación middleware (Anthony)

### 3.2 Rate Limiting - ✅ FUNCIONA
- **Prueba:** 15 intentos de login en 2 minutos
- **Resultado:** Bloqueado después de 10 intentos

### 3.3 Token Tampering - ✅ RESISTE
- **Prueba:** Modificar token JWT en `localStorage`
- **Resultado:** Rechazado por firma inválida

### 3.4 XSS básico - ✅ RESISTE
- **Prueba:** `<script>alert('xss')</script>` en nombre
- **Resultado:** Sanitizado por `express-validator`

## 4. METODOLOGÍA DE PRUEBA

### 4.1 Herramientas utilizadas:
- **OWASP ZAP:** Escaneo automático
- **Postman:** Pruebas manuales de API
- **Burp Suite Community:** Proxy para análisis
- **Custom scripts:** Pruebas específicas

### 4.2 Ámbito de prueba:
```
✅ Backend API (localhost:5000)
✅ Frontend (localhost:3000)
✅ Base de datos PostgreSQL
❌ Infraestructura (fuera de alcance)
```

### 4.3 Técnicas probadas:
- Fuerza bruta a endpoints de login
- Inyección SQL en parámetros
- Manipulación de tokens JWT
- XSS en formularios
- CSRF en endpoints POST
- Directory traversal (si aplica)
- File upload malicioso (si aplica)

## 5. RECOMENDACIONES PRIORIZADAS

### Prioridad 1 (1 semana):
- Mover claves a variables de entorno - **Carlos**
- Fortificar secreto JWT - **Carlos**
- Añadir logging de intentos fallidos - **Anthony**

### Prioridad 2 (2 semanas):
- Implementar liveness detection - **Juan**
- Configurar SSL para producción - **Anthony**
- Añadir headers de seguridad adicionales - **Anthony**

### Prioridad 3 (1 mes):
- Implementar 2FA opcional - **Carlos + Juan**
- Auditoría de código por terceros - **Equipo completo**
- Plan de respuesta a incidentes - **Anthony**

## 6. EVIDENCIA DE PRUEBAS

### 6.1 Logs de pruebas:
```bash
# Ejecución de OWASP ZAP
[INFO] Starting scan on http://localhost:5000
[WARN] Found: Information Disclosure - Sensitive Data in URL
[INFO] Scan completed: 0 Critical, 1 High, 2 Medium
```

### 6.2 Screenshots:
- `evidence/sqli-blocked.png` - Inyección SQL bloqueada
- `evidence/rate-limiting.png` - Rate limiting funcionando
- `evidence/token-invalid.png` - Token manipulado rechazado

## 7. PLAN DE REMEDIACIÓN

### Para Carlos:

| Vulnerabilidad | Acción | Fecha |
|---|---|---|
| Clave hardcodeada | Mover a `.env` | 23/01/2026 |
| JWT secret débil | Generar clave segura | 25/01/2026 |

### Para Juan:

| Vulnerabilidad | Acción | Fecha |
|---|---|---|
| No liveness detection | Investigar librerías | 27/01/2026 |
| Implementar POC | Código funcional | 03/02/2026 |

### Para Anthony:

| Vulnerabilidad | Acción | Fecha |
|---|---|---|
| Headers seguridad | Configurar Helmet completo | 23/01/2026 |
| Logging | Mejorar eventos de seguridad | 25/01/2026 |

## 8. PRÓXIMAS PRUEBAS PROGRAMADAS

### 8.1 Prueba de carga:
- **Fecha:** 04/02/2026
- **Responsable:** Carlos
- **Objetivo:** 100 usuarios concurrentes en login

### 8.2 Pentesting externo:
- **Fecha:** 05/02/2026
- **Responsable:** Anthony
- **Presupuesto estimado:** $500-1000

### 8.3 Auditoría de código:
- **Fecha:** 05/02/2026
- **Responsable:** Equipo completo
- **Herramienta:** SonarQube/CodeQL

## 9. FIRMAS DE APROBACIÓN

### Revisado por:

**Carlos Campoverde** (Backend Lead)
- **Fecha:** __________
- **Comentarios:** [Acepto los hallazgos y me comprometo a las correcciones]

**Juan Pasquel** (Frontend Lead)
- **Fecha:** __________
- **Comentarios:** [Acepto los hallazgos y me comprometo a las correcciones]

**Anthony Villarreal** (Pentester)
- **Fecha:** __________
- **Comentarios:** [Pruebas completadas según metodología]

---

### Aprobado para producción condicional:
- ✅ **SI:** Se corrigen vulnerabilidades de severidad ALTA en 72 horas
- ✅ **SI:** Se corrigen vulnerabilidades de severidad MEDIA en 14 días
- ❌ **NO:** Si no se cumplen los plazos anteriores

---

**Documento confidencial** - No distribuir sin autorización  
**Próxima prueba programada:** 05/02/2026